require 'socket'
require 'uri'
require 'open-uri'
require "openssl"

#own classes
require 'require_all'
require_all 'modules'

#host definitions
HOST = 'localhost'
SERVER_PORT = 2016

@server = TCPServer.new(HOST, SERVER_PORT)
sslContext = OpenSSL::SSL::SSLContext.new
sslContext.cert = OpenSSL::X509::Certificate.new(File.open("server.crt"))
sslContext.key = OpenSSL::PKey::RSA.new(File.open("server.key"))
@sslServer = OpenSSL::SSL::SSLServer.new(@server, sslContext)

pool = Pool.new

loop do
	pool.pool_conn(@server)
	#pool.auto_clean_conns
end
